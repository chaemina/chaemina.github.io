---
layout: default
title: 렌더링 
parent: Next.js
nav_order: 9
---


# 렌더링 
{: .no_toc }

작성한 코드를 사용자 인터페이스로 변환
{: .fs-6 .fw-300 }

**React**와 **Next.js**를 사용하면 코드의 일부가 서버나 클라이언트에서 렌더링 될 수 있는 하이브리드 웹앱을 만들 수 있다. 


## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---


## Rendering

### 렌더링 환경 

<img src="../../../assets/images/rendering.png" alt="렌더링" aria-label="렌더링 Image" width="400" height="200">

- Client : 애플리케이션 코드에 대한 요청을 서버에 보내는 사용자 장치 브라우저. 서버의 응답을 사용자 인터페이스로 전환한다.  
- Server : 애플리케이션 코드를 저장하고 클라이언트로 부터 요청을 받으면 적절한 응답을 보낸다. 

### 요청 응답 라이프 사이클

### 네트워크 바운더리 

서로 다른 환경을 구분하는 개념적인 선이다. 

React에서는 `"use client"`와 `"use server"` 규칙을 사용하여 경계를 정의한다. 


## Server Component 

애플리케이션의 서버 부분에서 렌더링되는 컴포넌트이다. 

대부분의 컴포넌트가 서버에서 렌더링되고 작은 인터렉티브 UI요소만 클라이언트에서 렌더링한다. 

### 장점 

1. 렌더링에 필요한 데이터를 가져오는데 걸리는 시간이나 클라이언트가 수행해야하는 요청이 감소한다
1. 토큰이나 API키를 서버에서 보관하기 때문에 보안에 도움이 된다
1. 결과를 캐시하고 재사용할 수 있어서 각 요청에 대해 수행되는 렌더링 및 가져오는 데이터 양이 절감된다
1. 클라이언트에서 서버 컴포넌트 JS 다운 및 분석할 필요 없어서 번들 크기가 절감된다
1. 초기구동, SEO, 스트리밍(서스펜스) 등의 장점이 있다

{: .highlight}
Next.js는 기본적으로 서버 컴포넌트를 사용한다. 

자동적으로 서버 컴포넌트를 사용하나 필요한 경우 "use client" 명시하여 클라이언트 컴포넌트 사용 할 수 있다. 



## Client Component

애플리케이션의 클라이언트 부분에서 렌더링되는 컴포넌트이다. 

사용자와의 상호작용이나 인터렉티브 UI요소를 담당한다. 

Next.js는 서버에서 사전 렌더링이 되고, 클라이언트에서 Hydrate 되기 때문에 초기 렌더링 성능이 개선된다. 

### Hydrate 

서버 사이드 단에서 렌더링 된 정적 페이지와 번들링 된 JS 파일을 클라이언트에게 보낸 뒤, 클라이언트 단에서 HTML 코드와 React인 JS 코드를 서로 매칭 시키는 과정이다. 

### 장점 

1. 상호 작용성 : 상태, 효과 및 이벤트 리스너 사용이 가능하고 즉각적인 피드백 제공 및 UI 업데이트 
1. 브라우저 API : 위치 정보와 같은 브라우저 API에 액세스 할 수 있다



<img src="../../../assets/images/useclient.png" alt="useclient" aria-label="useclient Image" width="400" height="200">


파일 상단에 `"use client"` 선언 시, 하위 구성 요소를 포함하여 해당 파일로 가져온 다른 모든 모듈이 클라이언트 번들의 일부로 간주된다. 

{: .note-title }
> **주의**
>
> 하위 구성 요소와 모듈 모두 포함 되므로 모든 구성 요소에 use client를 명시 할 필요 없다


## 언제 사용할까 


|         | 서버 컴포넌트        |  클라이언트 컴포넌트         | 
|:-------------|:------------------|:------------------|
| 데이터 가져오기 | ☑️  | |
| 백앤드 리소스에 액세스 | ☑️ | |
| 보안 정보(액세스 토큰, API 키) | ☑️ | |
| 서버에 대한 큰 의존성 / 클라이언트 측 JS 감소 | ☑️ | |
| 상호 작용 및 이벤트 리스너 `onClick()` `onChange()` 등 |  | ☑️ |
| 상태 및 라이프 사이클 효과 `useState()` `useEffect()` 등 |  | ☑️ |
| 브라우저 전용 API |  | ☑️ |
| 사용자 정의 훅 |  | ☑️ |
| React 클래스 컴포넌트 |  | ☑️ |
